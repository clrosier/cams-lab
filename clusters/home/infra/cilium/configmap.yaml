apiVersion: v1
kind: ConfigMap
metadata:
  name: cilium-values
  namespace: kube-system
data:
  values.yaml: |
    # Enable Cilium CNI
    cni:
      chainingMode: none

    # Enable Gateway API + Envoy (Cilium default implementation)
    gatewayAPI:
      enabled: true

    envoy:
      enabled: true

    kubeProxyReplacement: true
    k8sServiceHost: 127.0.0.1
    k8sServicePort: 6443

    # L2 LoadBalancer IPs
    l2announcements:
      enabled: true

    # LoadBalancer IPAM
    ipam:
      mode: "cluster-pool"
      operator:
        clusterPoolIPv4PodCIDR: "10.42.0.0/16"
        clusterPoolIPv4MaskSize: 24

    loadBalancer:
      algorithm: "maglev"
      mode: "dsr"

    externalIPs:
      enabled: true
