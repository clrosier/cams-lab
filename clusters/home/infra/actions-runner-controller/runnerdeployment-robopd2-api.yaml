---
apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: robopd2-api-runner
  namespace: actions-runner-system
spec:
  replicas: 1
  template:
    spec:
      # Repository-level runner for robopd2-api
      repository: cameronrosier/robopd2-api
      # Labels to identify this runner in GitHub Actions workflows
      labels:
        - self-hosted
        - robopd2
      # Docker image for the runner (supports ARM64 for Raspberry Pi)
      image: summerwind/actions-runner:latest
      # Resource constraints for Raspberry Pi
      resources:
        requests:
          cpu: 500m
          memory: 1Gi
        limits:
          cpu: 2000m
          memory: 4Gi
      # Volume mounts for build artifacts (buildah doesn't need Docker socket)
      # Note: If you need Docker socket for other tools, uncomment below
      # volumeMounts:
      # - mountPath: /var/run/docker.sock
      #   name: docker-sock
      # volumes:
      # - name: docker-sock
      #   hostPath:
      #     path: /var/run/docker.sock
      #     type: Socket
      # env:
      # - name: DOCKER_HOST
      #   value: unix:///var/run/docker.sock
      # Node selector to prefer worker nodes (avoid control-plane)
      # nodeSelector:
      #   node-role.kubernetes.io/control-plane: "false"

